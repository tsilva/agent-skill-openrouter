"""MCP server for {API_NAME}."""

import json
from typing import Optional

from mcp.server.fastmcp import FastMCP

from .client import get_client
from .config import validate_config

# Validate configuration on import
validate_config()

mcp = FastMCP("{SERVER_NAME}")


@mcp.tool()
def example_tool(query: str, limit: int = 10) -> str:
    """Example tool description - Claude uses this to understand what the tool does.

    Args:
        query: Search query or input
        limit: Maximum results to return
    """
    client = get_client()
    result = client.search(query, limit=limit)
    return json.dumps(result, indent=2)


@mcp.tool()
def list_items(category: Optional[str] = None) -> str:
    """List available items, optionally filtered by category.

    Args:
        category: Optional category filter
    """
    client = get_client()
    items = client.list_items(category=category)
    return json.dumps(items, indent=2)


def main():
    """Run the MCP server."""
    mcp.run()


if __name__ == "__main__":
    main()
